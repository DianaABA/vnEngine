<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Enhanced vnEngine Demo</title>
    <style>
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        background: #1a1a1a;
        color: #ffffff;
        padding: 20px;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
      }
      .demo-section {
        background: #2a2a2a;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }
      .demo-button {
        background: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
        font-size: 14px;
      }
      .demo-button:hover {
        background: #45a049;
      }
      .status {
        background: #333;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
        font-family: monospace;
        font-size: 12px;
      }
      .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }
      .feature-card {
        background: #333;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #4CAF50;
      }
      .feature-card h3 {
        margin-top: 0;
        color: #4CAF50;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üéÆ Enhanced vnEngine Demo</h1>
      <p>Testing all the features we ported from ChakraHearts!</p>

      <div class="demo-section">
        <h2>üéµ Audio System Test</h2>
        <p>Enhanced audio with crossfading, volume controls, and scene detection</p>
        <button class="demo-button" onclick="testAudio()">Test Audio System</button>
        <div id="audioStatus" class="status">Ready to test audio features</div>
      </div>

      <div class="demo-section">
        <h2>‚ú® VFX System Test</h2>
        <p>Screen shake, overlays, particles, and cinematic effects</p>
        <button class="demo-button" onclick="testScreenShake()">Screen Shake</button>
        <button class="demo-button" onclick="testOverlay()">Overlay Effect</button>
        <button class="demo-button" onclick="testParticles()">Particles</button>
        <div id="vfxStatus" class="status">Ready to test VFX features</div>
      </div>

      <div class="demo-section">
        <h2>üíæ Game State Test</h2>
        <p>Save/load system, progression tracking, and variable management</p>
        <button class="demo-button" onclick="testGameState()">Test Game State</button>
        <button class="demo-button" onclick="testSaveLoad()">Save/Load</button>
        <div id="gameStateStatus" class="status">Ready to test game state features</div>
      </div>

      <div class="demo-section">
        <h2>üñºÔ∏è Asset Management Test</h2>
        <p>Character loading, background mapping, and asset preloading</p>
        <button class="demo-button" onclick="testAssets()">Test Assets</button>
        <div id="assetsStatus" class="status">Ready to test asset features</div>
      </div>

      <div class="feature-grid">
        <div class="feature-card">
          <h3>Audio Enhancements</h3>
          <ul>
            <li>Advanced crossfading</li>
            <li>Volume category management</li>
            <li>Scene-based music detection</li>
            <li>React hooks integration</li>
          </ul>
        </div>
        <div class="feature-card">
          <h3>VFX System</h3>
          <ul>
            <li>Screen shake effects</li>
            <li>Background overlays</li>
            <li>Particle systems</li>
            <li>CSS animation library</li>
          </ul>
        </div>
        <div class="feature-card">
          <h3>Game State</h3>
          <ul>
            <li>Multi-project support</li>
            <li>Progression tracking</li>
            <li>Variable management</li>
            <li>Save/load system</li>
          </ul>
        </div>
        <div class="feature-card">
          <h3>Asset Management</h3>
          <ul>
            <li>Character metadata</li>
            <li>Background mapping</li>
            <li>Asset preloading</li>
            <li>Validation system</li>
          </ul>
        </div>
      </div>
    </div>

    <script>
      // Mock implementations for testing UI
      function updateStatus(elementId, message, isSuccess = true) {
        const element = document.getElementById(elementId);
        element.textContent = message;
        element.style.color = isSuccess ? '#4CAF50' : '#f44336';
      }

      function testAudio() {
        updateStatus('audioStatus', 'Testing audio system...', false);
        setTimeout(() => {
          updateStatus('audioStatus', '‚úÖ Audio system loaded! Features: crossfading, volume control, scene detection');
        }, 1000);
      }

      function testScreenShake() {
        document.body.style.animation = 'shake 0.5s ease-in-out';
        setTimeout(() => {
          document.body.style.animation = '';
          updateStatus('vfxStatus', '‚úÖ Screen shake effect applied!');
        }, 500);
      }

      function testOverlay() {
        const overlay = document.createElement('div');
        overlay.style.cssText = `
          position: fixed; top: 0; left: 0; right: 0; bottom: 0;
          background: rgba(255, 100, 100, 0.3);
          pointer-events: none; z-index: 9999;
          animation: fadeInOut 1s ease-in-out;
        `;
        document.body.appendChild(overlay);
        setTimeout(() => {
          overlay.remove();
          updateStatus('vfxStatus', '‚úÖ Overlay effect demonstrated!');
        }, 1000);
      }

      function testParticles() {
        for (let i = 0; i < 20; i++) {
          const particle = document.createElement('div');
          particle.style.cssText = `
            position: fixed; width: 4px; height: 4px; border-radius: 50%;
            background: #FFD700; pointer-events: none; z-index: 9999;
            left: ${Math.random() * window.innerWidth}px;
            top: ${Math.random() * window.innerHeight}px;
            animation: sparkle 2s ease-out forwards;
          `;
          document.body.appendChild(particle);
          setTimeout(() => particle.remove(), 2000);
        }
        updateStatus('vfxStatus', '‚úÖ Particle system activated!');
      }

      function testGameState() {
        const mockState = {
          variables: { playerLevel: 5, currentChapter: 2 },
          flags: { tutorialComplete: true, firstBoss: false },
          progression: { totalPlayTime: 3600, episodesCompleted: 3 }
        };
        updateStatus('gameStateStatus', `‚úÖ Game State: Level ${mockState.variables.playerLevel}, Chapter ${mockState.variables.currentChapter}, ${mockState.progression.episodesCompleted} episodes complete`);
      }

      function testSaveLoad() {
        const saveData = {
          timestamp: new Date().toISOString(),
          episode: 'episode-1-scene-5',
          variables: { choice1: 'courage', choice2: 'compassion' }
        };
        localStorage.setItem('vnEngine_demo_save', JSON.stringify(saveData));
        updateStatus('gameStateStatus', `‚úÖ Save/Load: Saved game state at ${saveData.episode}`);
      }

      function testAssets() {
        const mockStats = {
          characters: 16,
          avatars: 7,
          backgrounds: { total: 45, loaded: 32, pending: 13 },
          cachedAssets: 28
        };
        updateStatus('assetsStatus', `‚úÖ Assets: ${mockStats.characters} characters, ${mockStats.avatars} avatars, ${mockStats.backgrounds.loaded}/${mockStats.backgrounds.total} backgrounds loaded`);
      }

      // Add CSS animations
      const style = document.createElement('style');
      style.textContent = `
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
          20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        @keyframes fadeInOut {
          0%, 100% { opacity: 0; }
          50% { opacity: 1; }
        }
        @keyframes sparkle {
          0% { opacity: 1; transform: scale(1) translateY(0); }
          100% { opacity: 0; transform: scale(0.3) translateY(-50px); }
        }
      `;
      document.head.appendChild(style);
    </script>
  </body>
</html>